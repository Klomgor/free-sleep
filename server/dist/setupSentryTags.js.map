{"version":3,"file":"setupSentryTags.js","sources":["setupSentryTags.ts"],"sourceRoot":"/","sourcesContent":["import * as Sentry from '@sentry/node';\nimport logger from './logger.js';\nimport { getFranken } from './8sleep/frankenServer.js';\nimport './jobs/jobScheduler.js';\n\nimport settingsDB from './db/settings.js';\n\nexport async function setupSentryTags() {\n  logger.debug('Setting up sentry tags');\n  const franken = await getFranken();\n  const deviceStatus = await franken.getDeviceStatus();\n  Sentry.setUser({ id: settingsDB.data.id });\n  Sentry.setTag('hub_version', deviceStatus.hubVersion);\n  Sentry.setTag('cover_version', deviceStatus.coverVersion);\n  logger.debug('Set up sentry tags');\n}\n"],"names":[],"mappings":";;AAAA,OAAO,KAAK,MAAM,MAAM,cAAc,CAAC;AACvC,OAAO,MAAM,MAAM,aAAa,CAAC;AACjC,OAAO,EAAE,UAAU,EAAE,MAAM,2BAA2B,CAAC;AACvD,OAAO,wBAAwB,CAAC;AAEhC,OAAO,UAAU,MAAM,kBAAkB,CAAC;AAE1C,MAAM,CAAC,KAAK,UAAU,eAAe;IACnC,MAAM,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;IACvC,MAAM,OAAO,GAAG,MAAM,UAAU,EAAE,CAAC;IACnC,MAAM,YAAY,GAAG,MAAM,OAAO,CAAC,eAAe,EAAE,CAAC;IACrD,MAAM,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,UAAU,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;IAC3C,MAAM,CAAC,MAAM,CAAC,aAAa,EAAE,YAAY,CAAC,UAAU,CAAC,CAAC;IACtD,MAAM,CAAC,MAAM,CAAC,eAAe,EAAE,YAAY,CAAC,YAAY,CAAC,CAAC;IAC1D,MAAM,CAAC,KAAK,CAAC,oBAAoB,CAAC,CAAC;AACrC,CAAC","debug_id":"9c2082be-7c09-5f5a-a34d-5c1a39ec1c5c"}