{"version":3,"file":"settings.js","sources":["db/settings.ts"],"sourceRoot":"/","sourcesContent":["// LowDB, stores the schedules in /persistent/free-sleep-data/lowdb/settingsDB.json\nimport _ from 'lodash';\nimport { Low } from 'lowdb';\nimport { JSONFile } from 'lowdb/node';\n\nimport { Settings } from './settingsSchema.js';\nimport config from '../config.js';\n\n\nconst defaultData: Settings = {\n  id: crypto.randomUUID(),\n  timeZone: null,\n  temperatureFormat: 'fahrenheit',\n  rebootDaily: true,\n  left: {\n    name: 'Left',\n    awayMode: false,\n  },\n  right: {\n    name: 'Right',\n    awayMode: false,\n  },\n  primePodDaily: {\n    enabled: false,\n    time: '14:00',\n  },\n};\n\nconst file = new JSONFile<Settings>(`${config.lowDbFolder}settingsDB.json`);\nconst settingsDB = new Low<Settings>(file, defaultData);\nawait settingsDB.read();\n// Allows us to add default values to the settings if users have existing settingsDB.json data\nsettingsDB.data = _.merge({}, defaultData, settingsDB.data);\nawait settingsDB.write();\n\nexport default settingsDB;\n"],"names":[],"mappings":"AAAA,mFAAmF;;;AACnF,OAAO,CAAC,MAAM,QAAQ,CAAC;AACvB,OAAO,EAAE,GAAG,EAAE,MAAM,OAAO,CAAC;AAC5B,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAGtC,OAAO,MAAM,MAAM,cAAc,CAAC;AAGlC,MAAM,WAAW,GAAa;IAC5B,EAAE,EAAE,MAAM,CAAC,UAAU,EAAE;IACvB,QAAQ,EAAE,IAAI;IACd,iBAAiB,EAAE,YAAY;IAC/B,WAAW,EAAE,IAAI;IACjB,IAAI,EAAE;QACJ,IAAI,EAAE,MAAM;QACZ,QAAQ,EAAE,KAAK;KAChB;IACD,KAAK,EAAE;QACL,IAAI,EAAE,OAAO;QACb,QAAQ,EAAE,KAAK;KAChB;IACD,aAAa,EAAE;QACb,OAAO,EAAE,KAAK;QACd,IAAI,EAAE,OAAO;KACd;CACF,CAAC;AAEF,MAAM,IAAI,GAAG,IAAI,QAAQ,CAAW,GAAG,MAAM,CAAC,WAAW,iBAAiB,CAAC,CAAC;AAC5E,MAAM,UAAU,GAAG,IAAI,GAAG,CAAW,IAAI,EAAE,WAAW,CAAC,CAAC;AACxD,MAAM,UAAU,CAAC,IAAI,EAAE,CAAC;AACxB,8FAA8F;AAC9F,UAAU,CAAC,IAAI,GAAG,CAAC,CAAC,KAAK,CAAC,EAAE,EAAE,WAAW,EAAE,UAAU,CAAC,IAAI,CAAC,CAAC;AAC5D,MAAM,UAAU,CAAC,KAAK,EAAE,CAAC;AAEzB,eAAe,UAAU,CAAC","debug_id":"b60762cb-1150-5f13-a600-7a11b5ffbad5"}