{"version":3,"file":"executePython.js","sources":["jobs/executePython.ts"],"sourceRoot":"/","sourcesContent":["import logger from '../logger.js';\nimport { exec } from 'child_process';\nimport fs from 'fs';\n\ntype ExecutePythonScriptArgs = {\n  script: string;\n  cwd?: string;\n  args?: string[];\n};\nexport const executePythonScript = ({ script, args = [] }: ExecutePythonScriptArgs) => {\n  const pythonExecutable = '/home/dac/venv/bin/python';\n  if (!fs.existsSync(pythonExecutable)) {\n    logger.debug(`Not executing python script, ${pythonExecutable} does not exist!`);\n    return;\n  }\n\n  const command = `${pythonExecutable} -B ${script} ${args.join(' ')}`;\n  logger.info(`Executing: ${command}`);\n\n  exec(command, { env: { ...process.env } }, (error, stdout, stderr) => {\n    if (error) {\n      logger.error(`Execution error: ${error.message}`);\n      return;\n    }\n    if (stderr) {\n      logger.error(`Python stderr: ${stderr}`);\n    }\n    if (stdout) {\n      logger.info(`Python stdout: ${stdout}`);\n    }\n  });\n};\n"],"names":[],"mappings":";;AAAA,OAAO,MAAM,MAAM,cAAc,CAAC;AAClC,OAAO,EAAE,IAAI,EAAE,MAAM,eAAe,CAAC;AACrC,OAAO,EAAE,MAAM,IAAI,CAAC;AAOpB,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,EAAE,MAAM,EAAE,IAAI,GAAG,EAAE,EAA2B,EAAE,EAAE;IACpF,MAAM,gBAAgB,GAAG,2BAA2B,CAAC;IACrD,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,gBAAgB,CAAC,EAAE,CAAC;QACrC,MAAM,CAAC,KAAK,CAAC,gCAAgC,gBAAgB,kBAAkB,CAAC,CAAC;QACjF,OAAO;IACT,CAAC;IAED,MAAM,OAAO,GAAG,GAAG,gBAAgB,OAAO,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC;IACrE,MAAM,CAAC,IAAI,CAAC,cAAc,OAAO,EAAE,CAAC,CAAC;IAErC,IAAI,CAAC,OAAO,EAAE,EAAE,GAAG,EAAE,EAAE,GAAG,OAAO,CAAC,GAAG,EAAE,EAAE,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,EAAE;QACnE,IAAI,KAAK,EAAE,CAAC;YACV,MAAM,CAAC,KAAK,CAAC,oBAAoB,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;YAClD,OAAO;QACT,CAAC;QACD,IAAI,MAAM,EAAE,CAAC;YACX,MAAM,CAAC,KAAK,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC3C,CAAC;QACD,IAAI,MAAM,EAAE,CAAC;YACX,MAAM,CAAC,IAAI,CAAC,kBAAkB,MAAM,EAAE,CAAC,CAAC;QAC1C,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC","debug_id":"f21ab786-7037-58c8-a3bd-6d56b45c70f7"}