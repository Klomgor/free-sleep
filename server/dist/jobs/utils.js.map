{"version":3,"file":"utils.js","sources":["jobs/utils.ts"],"sourceRoot":"/","sourcesContent":["import { DayOfWeek, Side, Time } from '../db/schedulesSchema.js';\nimport logger from '../logger.js';\n\nexport const DAYS_OF_WEEK = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\nexport function getDayOfWeekIndex(day: DayOfWeek): number {\n  return DAYS_OF_WEEK.indexOf(day);\n}\n\nfunction getNextDayOfWeekIndex(day: DayOfWeek): number {\n  const dayIndex = getDayOfWeekIndex(day);\n  if (dayIndex === 6) return 0;\n  return dayIndex + 1;\n}\n\n\nfunction isEndTimeNextDay(endTime: Time) {\n  const endHour = Number(endTime.split(':')[0]);\n  return endHour <= 12;\n}\n\nexport function getDayIndexForSchedule(scheduleDay: DayOfWeek, time: Time) {\n  if (isEndTimeNextDay(time)) {\n    return getNextDayOfWeekIndex(scheduleDay);\n  } else {\n    return getDayOfWeekIndex(scheduleDay);\n  }\n}\n\n\nexport function logJob(message: string, side: Side, day: DayOfWeek, dayIndex: number, time: string) {\n  const endDay = DAYS_OF_WEEK[dayIndex];\n  const endHour = Number(time.split(':')[0]);\n  const timeOfDay = endHour < 11 ? 'morning' : 'night';\n  logger.debug(`${message} for ${side} side for ${day} -> ${endDay} -- ${endDay} ${timeOfDay} @ ${time}`);\n}\n"],"names":[],"mappings":";;AACA,OAAO,MAAM,MAAM,cAAc,CAAC;AAElC,MAAM,CAAC,MAAM,YAAY,GAAG,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,CAAC,CAAC;AAC3G,MAAM,UAAU,iBAAiB,CAAC,GAAc;IAC9C,OAAO,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACnC,CAAC;AAED,SAAS,qBAAqB,CAAC,GAAc;IAC3C,MAAM,QAAQ,GAAG,iBAAiB,CAAC,GAAG,CAAC,CAAC;IACxC,IAAI,QAAQ,KAAK,CAAC;QAAE,OAAO,CAAC,CAAC;IAC7B,OAAO,QAAQ,GAAG,CAAC,CAAC;AACtB,CAAC;AAGD,SAAS,gBAAgB,CAAC,OAAa;IACrC,MAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9C,OAAO,OAAO,IAAI,EAAE,CAAC;AACvB,CAAC;AAED,MAAM,UAAU,sBAAsB,CAAC,WAAsB,EAAE,IAAU;IACvE,IAAI,gBAAgB,CAAC,IAAI,CAAC,EAAE,CAAC;QAC3B,OAAO,qBAAqB,CAAC,WAAW,CAAC,CAAC;IAC5C,CAAC;SAAM,CAAC;QACN,OAAO,iBAAiB,CAAC,WAAW,CAAC,CAAC;IACxC,CAAC;AACH,CAAC;AAGD,MAAM,UAAU,MAAM,CAAC,OAAe,EAAE,IAAU,EAAE,GAAc,EAAE,QAAgB,EAAE,IAAY;IAChG,MAAM,MAAM,GAAG,YAAY,CAAC,QAAQ,CAAC,CAAC;IACtC,MAAM,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3C,MAAM,SAAS,GAAG,OAAO,GAAG,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,OAAO,CAAC;IACrD,MAAM,CAAC,KAAK,CAAC,GAAG,OAAO,QAAQ,IAAI,aAAa,GAAG,OAAO,MAAM,OAAO,MAAM,IAAI,SAAS,MAAM,IAAI,EAAE,CAAC,CAAC;AAC1G,CAAC","debug_id":"52d40649-c294-5621-b90d-d1f84da5b8d0"}