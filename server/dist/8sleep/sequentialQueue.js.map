{"version":3,"file":"sequentialQueue.js","sources":["8sleep/sequentialQueue.ts"],"sourceRoot":"/","sourcesContent":["export class SequentialQueue {\n  private executing = Promise.resolve();\n\n  private execInternal(f: () => Promise<void>) {\n    const current = this.executing;\n    // eslint-disable-next-line no-async-promise-executor\n    const newPromise = new Promise<void>(async (resolve) => {\n      await current;\n      await f();\n      resolve();\n    });\n\n    this.executing = newPromise;\n    return newPromise;\n  }\n\n  public exec<T>(f: () => Promise<T>): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n      this.execInternal(async () => {\n        try {\n          resolve(await f());\n        } catch (err) {\n          reject(err);\n        }\n      });\n    });\n  }\n}\n"],"names":[],"mappings":";;AAAA,MAAM,OAAO,eAAe;IAClB,SAAS,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;IAE9B,YAAY,CAAC,CAAsB;QACzC,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;QAC/B,qDAAqD;QACrD,MAAM,UAAU,GAAG,IAAI,OAAO,CAAO,KAAK,EAAE,OAAO,EAAE,EAAE;YACrD,MAAM,OAAO,CAAC;YACd,MAAM,CAAC,EAAE,CAAC;YACV,OAAO,EAAE,CAAC;QACZ,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,SAAS,GAAG,UAAU,CAAC;QAC5B,OAAO,UAAU,CAAC;IACpB,CAAC;IAEM,IAAI,CAAI,CAAmB;QAChC,OAAO,IAAI,OAAO,CAAI,CAAC,OAAO,EAAE,MAAM,EAAE,EAAE;YACxC,IAAI,CAAC,YAAY,CAAC,KAAK,IAAI,EAAE;gBAC3B,IAAI,CAAC;oBACH,OAAO,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;gBACrB,CAAC;gBAAC,OAAO,GAAG,EAAE,CAAC;oBACb,MAAM,CAAC,GAAG,CAAC,CAAC;gBACd,CAAC;YACH,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;IACL,CAAC;CACF","debug_id":"685941cb-a506-5379-9ca1-9e499663d95f"}